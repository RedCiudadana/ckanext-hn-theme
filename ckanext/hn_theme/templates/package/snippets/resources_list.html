{# 
Renders a list of resources with icons and view links.

resources - A list of resources to render
pkg - A package object that the resources belong to.

Example:

  {% snippet "package/snippets/resources_list.html", pkg=pkg, resources=pkg.resources %}

#}
<section id="dataset-resources" class="resources">
    <h3>Descargas</h3>

    {% block resource_list %}
    {% if resources %}
    <div class="table-responsive">
        <table class="table table-hover table-striped">
            <thead class="thead-light">
                <tr>
                    <th scope="col" style="width: 5%">Ícono</th>
                    <th scope="col">Descripción</th>
                    <th scope="col" style="width: 15%">Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for resource in resources %}
                <tr>
                    {# Columna 1: Ícono con enlace a metadatos #}
                    <td class="text-center align-middle">
                        <!--<a href="{{ h.url_for(controller='package', action='resource_read', id=pkg.name, resource_id=resource.id) }}"
                           title="Ver metadatos del recurso">
                            {{ h.format_icon(resource.get('format', ''), alt=resource.get('format', '').upper()) | safe }}
                        </a>-->
                    </td>

                    {# Columna 2: Descripción (título + descripción) #}
                    <td class="align-middle">
                        <!--<strong>{{ resource.get('name', _('Sin título')) }}</strong>
                        {% if resource.get('description') %}
                        <br><small class="text-muted">{{ resource.description | truncate(120) }}</small>
                        {% endif %}-->
                    </td>

                    {# Columna 3: Botones de acción #}
                    <td class="align-middle">
                        <div class="btn-group" role="group">
                            {# Botón: Descargar #}
                            <!--{% if resource.get('url') and h.is_url(resource.url) %}
                            <a href="{{ resource.url }}"
                               class="btn btn-sm btn-success"
                               title="Descargar recurso"
                               target="_blank" rel="noopener">
                                <i class="fas fa-download"></i> Descargar
                            </a>
                            {% else %}
                            <button class="btn btn-sm btn-secondary" disabled title="URL no disponible">
                                <i class="fas fa-download"></i> Descargar
                            </button>
                            {% endif %}

                            {# Botón: Ver metadatos #}
                            <a href="{{ h.url_for(controller='package', action='resource_read', id=pkg.name, resource_id=resource.id) }}"
                               class="btn btn-sm btn-outline-primary"
                               title="Ver metadatos">
                                <i class="fas fa-info-circle"></i> Metadatos
                            </a>-->
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% else %}
    {% if h.check_access('resource_create', {'package_id': pkg['id']}) %}
    {% trans url=h.url_for(controller='package', action='new_resource', id=pkg.name) %}
    <p class="empty">Este conjunto de datos no tiene recursos, <a href="{{ url }}">¿por qué no agregar alguno?</a></p>
    {% endtrans %}
    {% else %}
    <p class="empty">{{ _('Este conjunto de datos no tiene recursos') }}</p>
    {% endif %}
    {% endif %}
    {% endblock %}
</section>